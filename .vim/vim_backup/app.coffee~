do ->
  console.log "Hello Backbone!"
  obj = new Backbone.Model()
  obj.set {name: "Murata"}
  obj.set {age: 20}

  console.log obj
  console.log JSON.stringify obj
  console.log obj.get "name"

  obj2 = new Backbone.Model({name: "Yuya", age: 23})

  console.log obj2.get "name"

  Staff = Backbone.Model.extend {
    defaults: {
      "name": "default"
      "age" : 0
      "updateTime": new Date()
    }

    initialize: ->
      console.log  "Staff[#{@.cid}]: #{JSON.stringify(@)}"
  }

  tmpStaff = new Staff()
  yuya = new Staff({name: "yuya", age: 23, fav: "牛たん"})

  objs = new Backbone.Collection([obj,obj2])
  console.log objs
  console.log JSON.stringify objs
  console.log objs.get("c1")
  console.log objs.at(0)

  objs.add new Backbone.Model {name: "Acroquest", age:20}
  objs.add new Backbone.Model {name: "Technology", age:10}

  console.log objs.length
  console.log objs

  objs.comparator = (item) ->
    item.get("age")
  objs.sort()
  console.log objs.map (obj)->
    obj.get("age")

  Staffs = Backbone.Collection.extend {
    model: Staff
  }

  staffs = new Staffs [tmpStaff, yuya]

  console.log JSON.stringify(staffs)
  console.log staffs.map (staff)->
    "#{staff.get("name")}: #{staff.get("updateTime")}"
