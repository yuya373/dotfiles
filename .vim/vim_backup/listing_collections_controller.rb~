class Admin::ListingCollectionsController < AdminApplicationController
  def index
    @collections = Collection.includes(:listings).all
    @listing_collection = ListingCollection.new
  end

  def create
    @listing_collection = ListingCollection.new(listing_collection_params)
    if @listing_collection.save
      flash[:notice] = "追加されました"
      redirect_to admin_listing_collections_path
    else
      flash[:error] = @listing_collection.errors.full_messages[0]
      render :index
    end
  end

  private

  def listing_collection_params
    params.permit(:listing_id, :collection_id)
  end
end
