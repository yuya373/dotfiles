total_price =  PreBooking.where.not(price: 1).sum(:price)
total_id = PreBooking.count(:id)
pp PreBooking.all.select{|pre|
  ((pre.start_at - pre.created_at) / (3600 * 24)).ceil}

day = PreBooking.all.map{ |pre|
  ((pre.start_at - pre.created_at) / (3600 * 24)).ceil
}
uniq_day = day.uniq.sort

uniq_day.each do |u|
  d = day.select { |pre| pre == u}
  puts "#{u}日前 #{d.count}件"
end


total_party = PreBooking.all.sum(:party)


sunday = PreBooking.all.select{ |pre| pre.start_at.sunday? }.count
saturday = PreBooking.all.select{ |pre| pre.start_at.saturday? }.count
(0..23).each do |time|
  c = PreBooking.all.select{ |pre| pre.start_at.hour == time }.count
  puts "#{time}時台 #{c}件"
end

puts "total_prebooking: #{total_id}件"
puts "休日: #{sunday + saturday}件"
puts "平日: #{total_id - sunday - saturday}件"
puts  "avg_price: #{total_price / total_id}円"
puts "平均予約人数: #{total_party / total_id}"
