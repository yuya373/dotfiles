class LinesController < ApplicationController
  helper_method :line_name_id

  def index
    if request.xhr?
      @lines = Line.pref_is(params[:pref_cd])
      render 'index.js', layout: false
    end
  end

  def show
    @stations = Station.joins(:line).merge(Line.where(id: params[:id])).
      published_listing_exists
  end
  private

  def line_name_id
    Line.available.distinct.pluck(:id, :line_name)
  end
end
